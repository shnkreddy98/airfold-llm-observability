name: shopping_data_with_json_path
cols:
  date: DateTime
  product_id: String
  user_id: Int64
  event: String
  price: Nullable(Float32) $.extra_data.price
  city: String $.extra_data.city
  country: String $.extra_data.country
  special_note: Nullable(String) $.extra_data.special_note
  tags: Array(String) $.extra_data.tags
  discount_amount: Nullable(Float32) $.extra_data.discount.amount
  discount_currency: Nullable(String) $.extra_data.discount.currency
  promo_code: Nullable(String) $.extra_data.promo_code
  gift_wrap: Nullable(Bool) $.extra_data.gift_wrap
  session_id: Nullable(String) $.extra_data.session_id
settings:
  engine: ReplacingMergeTree()
  order_by: "`product_id`"
